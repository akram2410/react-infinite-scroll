(this["webpackJsonpreact-infinite-scroll"]=this["webpackJsonpreact-infinite-scroll"]||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),o=n.n(a),i=n(3),u=n(7),s=n(6),j=n.n(s),b=function(e,t){var n=Object(c.useState)(!0),r=Object(i.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(!1),b=Object(i.a)(s,2),O=b[0],l=b[1],f=Object(c.useState)([]),d=Object(i.a)(f,2),h=d[0],p=d[1],v=Object(c.useState)(!1),g=Object(i.a)(v,2),x=g[0],S=g[1];return Object(c.useEffect)((function(){var n;return o(!0),l(!1),j()({method:"GET",url:"http://openlibrary.org/search.json",params:{q:e,page:t},cancelToken:new j.a.CancelToken((function(e){return n=e}))}).then((function(e){p((function(t){return Object(u.a)(new Set([].concat(Object(u.a)(t),Object(u.a)(e.data.docs.map((function(e){return e.title}))))))})),S(e.data.docs.length>0),o(!1)})).catch((function(e){j.a.isCancel(e)||l(!0)})),function(){return n()}}),[e,t]),Object(c.useEffect)((function(){p([])}),[e]),{loading:a,error:O,books:h,hasMore:x}},O=n(2);var l=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),o=Object(i.a)(a,2),u=o[0],s=o[1],j=b(n,u),l=j.books,f=j.hasMore,d=(j.error,j.loading),h=Object(c.useRef)(),p=Object(c.useCallback)((function(e){d||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&f&&s((function(e){return e+1}))})),e&&h.current.observe(e))}),[d,f]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"text",value:n,onChange:function(e){r(e.target.value),s(1)}}),l.map((function(e,t){return l.length===t+1?Object(O.jsx)("div",{ref:p,children:e},e):Object(O.jsx)("div",{children:e},e)})),Object(O.jsx)("div",{children:"Loading...."}),Object(O.jsx)("div",{children:"Error"})]})};o.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(l,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1138ed7b.chunk.js.map